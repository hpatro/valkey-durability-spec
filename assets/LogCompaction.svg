<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="692px" preserveAspectRatio="none" style="width:627px;height:692px;background:#FFFFFF;" version="1.1" viewBox="0 0 627 692" width="627px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="67.29" y2="614.5664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="293.9473" x2="293.9473" y1="67.29" y2="614.5664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="395.5293" x2="395.5293" y1="67.29" y2="614.5664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="490.791" x2="490.791" y1="67.29" y2="614.5664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="576.5332" x2="576.5332" y1="67.29" y2="614.5664"/><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.3584" x="5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3584" x="12" y="56.3027">Primary</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.3584" x="5" y="613.5664"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3584" x="12" y="633.8691">Primary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.582" x="250.9473" y="64.3027">Primary Log</text><path d="M276.2383,15 C276.2383,5 294.2383,5 294.2383,5 C294.2383,5 312.2383,5 312.2383,15 L312.2383,41 C312.2383,51 294.2383,51 294.2383,51 C294.2383,51 276.2383,51 276.2383,41 L276.2383,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M276.2383,15 C276.2383,25 294.2383,25 294.2383,25 C294.2383,25 312.2383,25 312.2383,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.582" x="250.9473" y="626.8691">Primary Log</text><path d="M276.2383,639.8564 C276.2383,629.8564 294.2383,629.8564 294.2383,629.8564 C294.2383,629.8564 312.2383,629.8564 312.2383,639.8564 L312.2383,665.8564 C312.2383,675.8564 294.2383,675.8564 294.2383,675.8564 C294.2383,675.8564 276.2383,675.8564 276.2383,665.8564 L276.2383,639.8564 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M276.2383,639.8564 C276.2383,649.8564 294.2383,649.8564 294.2383,649.8564 C294.2383,649.8564 312.2383,649.8564 312.2383,639.8564 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.2617" x="347.5293" y="64.3027">Snapshot File</text><path d="M377.6602,15 C377.6602,5 395.6602,5 395.6602,5 C395.6602,5 413.6602,5 413.6602,15 L413.6602,41 C413.6602,51 395.6602,51 395.6602,51 C395.6602,51 377.6602,51 377.6602,41 L377.6602,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M377.6602,15 C377.6602,25 395.6602,25 395.6602,25 C395.6602,25 413.6602,25 413.6602,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.2617" x="347.5293" y="626.8691">Snapshot File</text><path d="M377.6602,639.8564 C377.6602,629.8564 395.6602,629.8564 395.6602,629.8564 C395.6602,629.8564 413.6602,629.8564 413.6602,639.8564 L413.6602,665.8564 C413.6602,675.8564 395.6602,675.8564 395.6602,675.8564 C395.6602,675.8564 377.6602,675.8564 377.6602,665.8564 L377.6602,639.8564 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M377.6602,639.8564 C377.6602,649.8564 395.6602,649.8564 395.6602,649.8564 C395.6602,649.8564 413.6602,649.8564 413.6602,639.8564 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7422" x="453.791" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7422" x="460.791" y="56.3027">Replica 1</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7422" x="453.791" y="613.5664"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7422" x="460.791" y="633.8691">Replica 1</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7422" x="539.5332" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7422" x="546.5332" y="56.3027">Replica 2</text><rect fill="#E2E2F0" height="30.29" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.7422" x="539.5332" y="613.5664"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.7422" x="546.5332" y="633.8691">Replica 2</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="620.2754" x="0" y="97.8533"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="97.8533" y2="97.8533"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="100.8533" y2="100.8533"/><rect fill="#EEEEEE" height="23.1265" style="stroke:#000000;stroke-width:2.0;" width="141.0166" x="239.6294" y="87.29"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.7319" x="245.6294" y="103.6743">Snapshot Creation</text><line style="stroke:#181818;stroke-width:1.0;" x1="37.6792" x2="79.6792" y1="141.543" y2="141.543"/><line style="stroke:#181818;stroke-width:1.0;" x1="79.6792" x2="79.6792" y1="141.543" y2="154.543"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.6792" x2="79.6792" y1="154.543" y2="154.543"/><polygon fill="#181818" points="48.6792,150.543,38.6792,154.543,48.6792,158.543,44.6792,154.543" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6714" x="44.6792" y="136.769">Serialize in-memory state</text><polygon fill="#181818" points="383.6602,179.6694,393.6602,183.6694,383.6602,187.6694,387.6602,183.6694" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37.6792" x2="389.6602" y1="183.6694" y2="183.6694"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285.6445" x="44.6792" y="178.8955">Write snapshot (state, index, term, metadata)</text><path d="M400,196.6694 L400,236.6694 L589,236.6694 L589,206.6694 L579,196.6694 L400,196.6694 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M579,196.6694 L579,206.6694 L589,206.6694 L579,196.6694 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.0034" x="406" y="214.022">Includes lastIncludedIndex</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.0151" x="406" y="229.1484">and cluster metadata</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="620.2754" x="0" y="262.4856"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="262.4856" y2="262.4856"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="265.4856" y2="265.4856"/><rect fill="#EEEEEE" height="23.1265" style="stroke:#000000;stroke-width:2.0;" width="119.8599" x="250.2078" y="251.9224"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101.5752" x="256.2078" y="268.3066">Log Truncation</text><polygon fill="#181818" points="282.2383,302.1753,292.2383,306.1753,282.2383,310.1753,286.2383,306.1753" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37.6792" x2="288.2383" y1="306.1753" y2="306.1753"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.5591" x="44.6792" y="301.4014">Truncate log up to lastIncludedIndex</text><path d="M203,319.1753 L203,359.1753 L384,359.1753 L384,329.1753 L374,319.1753 L203,319.1753 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M374,319.1753 L374,329.1753 L384,329.1753 L374,319.1753 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.7861" x="209" y="336.5278">Retain only recent entries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.4219" x="209" y="351.6543">for future replication</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="620.2754" x="0" y="384.9915"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="384.9915" y2="384.9915"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="620.2754" y1="387.9915" y2="387.9915"/><rect fill="#EEEEEE" height="23.1265" style="stroke:#000000;stroke-width:2.0;" width="182.1685" x="219.0535" y="374.4282"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163.8838" x="225.0535" y="390.8125">Snapshot Advertisement</text><polygon fill="#181818" points="479.6621,439.8076,489.6621,443.8076,479.6621,447.8076,483.6621,443.8076" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37.6792" x2="485.6621" y1="443.8076" y2="443.8076"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.7632" x="44.6792" y="423.9072">AppendEntries / InstallSnapshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.645" x="44.6792" y="439.0337">(advertise snapshot index)</text><polygon fill="#181818" points="565.4043,484.0605,575.4043,488.0605,565.4043,492.0605,569.4043,488.0605" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37.6792" x2="571.4043" y1="488.0605" y2="488.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.7632" x="44.6792" y="468.1602">AppendEntries / InstallSnapshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.645" x="44.6792" y="483.2866">(advertise snapshot index)</text><polygon fill="#181818" points="48.6792,513.187,38.6792,517.187,48.6792,521.187,44.6792,517.187" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42.6792" x2="490.6621" y1="517.187" y2="517.187"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8271" x="54.6792" y="512.4131">Acknowledge</text><polygon fill="#181818" points="48.6792,542.3135,38.6792,546.3135,48.6792,550.3135,44.6792,546.3135" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42.6792" x2="576.4043" y1="546.3135" y2="546.3135"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8271" x="54.6792" y="541.5396">Acknowledge</text><path d="M5,559.3135 L5,599.3135 L610,599.3135 L610,569.3135 L600,559.3135 L5,559.3135 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M600,559.3135 L600,569.3135 L610,569.3135 L600,559.3135 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.0498" x="203.6128" y="576.666">Followers can request snapshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.7075" x="203.6128" y="591.7925">if behind compaction point</text><!--SRC=[fP4_Ry903CNtV0gB2IHGHKOaAg6gI4WCAAdKXSKa1gnUVDSxfvH- -buIGkcVhKE6-Da_Fxzpw9KBTYWAWutd2lrv01XWavIekCD0rpgixQ7JrZTYBkZ2qIeisL0hvyl4tM8pSeOBX6chPjE_rRHJqoIPp-4AVV24obPWFaysCBc7pGnoyeo6FmXO9XLLDbeBYafTHxwSmRDd9GWzPTZAuzXVqliOb7mrXeeKcpD6YTZOxFbmLB3xTdubXQbB2c0mwEMdN3NJMq4f8HP2f5mPhUaO3ppvMeeVZjUplanWOa_jGErlScV3laLiCv95D0jOCMVmL53CAdwUAMnbRptiQwrzjDt5rspydjoYZ2JbG5Kpsfl9fZDOE4TIFdOmk8l7ndYCwIUtCiH-zYl2DhhH1PB-3v9DOT8zvQ9u4NioL1ueoTA_gZUXZ9kzIskCFP4FKA34wrzh2dhTi1NUmuwEtBoHhHmMxLCuowAV]--></g></svg>